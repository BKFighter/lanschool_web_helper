var action="blocked";var action_url="";var site_list="";var list_type=0;var event_index=0;var BLOCK_ALL=1;var ALLOW_SPECIFIC=2;var BLOCK_SPECIFIC=3;var NO_IP_ADDRESS=4;function main(){var d=document.getElementById("index_title");var b=document.getElementById("blocked_text");var a="No content loaded yet";var c=parseURL(document.URL);if(c!=null){event_index=c.index}chrome.runtime.sendMessage({message:"limiting_list",index:event_index},function(e){list_type=e.urlListType;switch(list_type){case BLOCK_ALL:document.title=chrome.i18n.getMessage("page_blocked_title")+chrome.i18n.getMessage("product_name");d.innerHTML=chrome.i18n.getMessage("blocked_website");b.innerHTML=chrome.i18n.getMessage("all_blocked_header");break;case BLOCK_SPECIFIC:document.title=chrome.i18n.getMessage("page_blocked_title")+chrome.i18n.getMessage("product_name");d.innerHTML=chrome.i18n.getMessage("blocked_website");b.innerHTML=chrome.i18n.getMessage("page_blocked_header");break;case ALLOW_SPECIFIC:document.title=chrome.i18n.getMessage("page_blocked_available_title")+chrome.i18n.getMessage("product_name");d.innerHTML=chrome.i18n.getMessage("available_websites");b.innerHTML=chrome.i18n.getMessage("page_blocked_header_allowed");buildUrlList(e.UrlList);break;case NO_IP_ADDRESS:document.title=chrome.i18n.getMessage("page_blocked_title")+chrome.i18n.getMessage("product_name");d.innerHTML=chrome.i18n.getMessage("blocked_ipaddress");b.innerHTML=chrome.i18n.getMessage("page_blocked_header");break;default:break}})}function buildUrlList(e){var b='<p id="sites">';var f=document.getElementById("url_text");for(var a=0;a<e.length;a++){var d=e[a];var c=d;console.log("Adding URL: ["+d+"]");d=d.replace(/[<>:]/,"");d=d.replace(/\*/,"&#42;");d=d.replace(/\?/,"&#63;");if(c.indexOf("?")!=-1||c.indexOf("*")!=-1){b+="<span>"+d+"</span><br>\n"}else{b+='<a href="http://'+d+'">'+d+"</a><br>\n"}}if(f){f.innerHTML="<br>"+b}}document.addEventListener("DOMContentLoaded",function(){main()});