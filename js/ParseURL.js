function URLObject(){this.prot="";this.host="";this.port="";this.path="";this.extra="";this.url="";this.params=[];this.isIP=false}function parseURL(a){console.log("parsing URL ["+a+"]");var h=a.indexOf("?")+1;var b=a.indexOf("#")+1||a.length+1;var g=a.slice(h,b-1);if(g===a||g===""){return null}var d={};var k=g.replace(/\+/g," ").split("&");for(var e=0;e<k.length;e++){var f=k[e].split("=");var c=decodeURIComponent(f[0]);var j=decodeURIComponent(f[1]);if(!(c in d)){d[c]=[]}d[c].push(f.length===2?j:null)}return d}function parseURLex(e){var d=new URLObject();var f=[];var c=/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/;var b=document.createElement("a");b.href=e;if(b.protocol){d.prot=b.protocol}else{d.prot="http:"}d.host=b.hostname;d.port=b.port;d.path=b.pathname;d.extra=b.search;d.isIP=(c.exec(d.host)==null)?false:true;d.url=d.host+d.path+d.extra;if(d.extra&&d.extra.length>0){f=parseURL(d.extra);if(f){d.params=f}else{d.params={}}}else{d.params={}}if(d.port===""){d.port="80"}return d}function dumpURLParts(a){console.log("Protocol: "+a.prot);console.log("Host:     "+a.host);console.log("Port:     "+a.port);console.log("Path:		"+a.path);console.log("Extra:	"+a.extra);console.log("IsIP:	    "+a.isIP);var c=Object.keys(a.params);console.log("Path:		"+a.path);if(c.length>0){for(var b in a.params){console.log("Param: "+b+" => "+a.params[b])}}}function testParseURL(){var b=parseURLex("http://www.lanschool.com");dumpURLParts(b);var a=parseURLex("https://www.gden.com:443/test.html/mystuff/washere");dumpURLParts(a);var a=parseURLex("ftp://ftp.fred.com:8001/test.html?this=that&fred=flintstone&barney=rubble");dumpURLParts(a);var a=parseURLex("http://10.0.0.4/fred.html?joe=5");dumpURLParts(a)};