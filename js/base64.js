var g_encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ArrayBufferToBase64(c){var e="";var b=new Uint8Array(c);var a=b.byteLength;for(var d=0;d<a;d++){e+=String.fromCharCode(b[d])}return window.btoa(e)}function ArrayBufferToBase64Ex(h){var g="";var q=new Uint8Array(h);var o=q.byteLength;var f=o%3;var p=o-f;var n,l,k,j;var m;for(var e=0;e<p;e=e+3){m=(q[e]<<16)|(q[e+1]<<8)|q[e+2];n=(m&16515072)>>18;l=(m&258048)>>12;k=(m&4032)>>6;j=m&63;g+=g_encodings[n]+g_encodings[l]+g_encodings[k]+g_encodings[j]}if(f==1){m=q[p];n=(m&252)>>2;l=(m&3)<<4;g+=g_encodings[n]+g_encodings[l]+"=="}else{if(f==2){m=(q[p]<<8)|q[p+1];n=(m&64512)>>10;l=(m&1008)>>4;k=(m&15)<<2;g+=g_encodings[n]+g_encodings[l]+g_encodings[k]+"="}}return g}function Base64ToArrayBufferEx(h){var r=(h.length/4)*3;var f=null;var q,o,m;var p,n,l,k;var e=0;var c=0;var d=g_encodings.indexOf(h.charAt(h.length-1));var b=g_encodings.indexOf(h.charAt(h.length-2));if(d==64){r--}if(b==64){r--}arrayBuffer=new ArrayBuffer(r);f=new Uint8Array(arrayBuffer,0);h=h.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(e=0;e<r;e+=3){p=g_encodings.indexOf(h.charAt(c++));n=g_encodings.indexOf(h.charAt(c++));l=g_encodings.indexOf(h.charAt(c++));k=g_encodings.indexOf(h.charAt(c++));q=(p<<2)|(n>>4);o=((n&15)<<4)|(l>>2);m=((l&3)<<6)|k;f[e]=q;if(l!=64){f[e+1]=o}if(k!=64){f[e+2]=m}}var g=f.byteLength;var a="";return arrayBuffer}var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(b){var a=(b.length/4)*3;var c=new ArrayBuffer(a);this.decode(b,c);return c},decode:function(g,f){var d=this._keyStr.indexOf(g.charAt(g.length-1));var b=this._keyStr.indexOf(g.charAt(g.length-2));var q=(g.length/4)*3;if(d==64){q--}if(b==64){q--}var e;var p,n,l;var o,m,k,h;var c=0;var a=0;if(f){e=new Uint8Array(f)}else{e=new Uint8Array(q)}g=g.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(c=0;c<q;c+=3){o=this._keyStr.indexOf(g.charAt(a++));m=this._keyStr.indexOf(g.charAt(a++));k=this._keyStr.indexOf(g.charAt(a++));h=this._keyStr.indexOf(g.charAt(a++));p=(o<<2)|(m>>4);n=((m&15)<<4)|(k>>2);l=((k&3)<<6)|h;e[c]=p;if(k!=64){e[c+1]=n}if(h!=64){e[c+2]=l}}return e}};function testBase64Ex(){var e=new Uint8ClampedArray([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90]);console.log("Testing base64 encoding");var a=e.byteLength;var c="";for(var d=0;d<a;d++){c+=String.fromCharCode(e[d])}console.log("BEGINING DATA: ["+c+"] "+c.length+" bytes");var h=ArrayBufferToBase64Ex(e);console.log("ArrayBuffer 1 ("+e.byteLength+" bytes) encoded into a string of "+h.length+" bytes");console.log("DATA: ["+h+"]");var f=Base64ToArrayBufferEx(h);console.log("Base64 data ("+h.length+" bytes) decoded to an array of "+f.byteLength+" bytes");console.log("DATA: "+f.toString()+" "+f.byteLength+" bytes");var b=new Uint8Array(f,0);var g;a=f.byteLength;c="";for(var d=0;d<a;d++){c+=String.fromCharCode(b[d])}console.log("ENDING DATA: ["+c+"] "+c.length+" bytes")};